# Git運用ルール
{% hint style='danger' %}
そもそも山田製作所とは架空の組織です．現実にある組織とは一切関係ありません．  
山田製作所開発部では，世間とは違う運用をしていることがあります．注意してください．
{% endhint %}

## ブランチ
### ブランチ命名規則
| ブランチ名 | 説明 | 備考 |
| -------- | -- | -------- |
| `master`     | マスターブランチ | リリース済の最新版     |
| `release/v<バージョン>` | リリースブランチ | リリース時にマスターブランチにマージする|
| `feature/<title><#issue_num>` |フューチャーブランチ|機能追加や改修などはこれ<br>releaseブランチにマージする|
| `fix/<title><#issue_num>` |バグ修正ブランチ|上がったバグの修正を行うブランチ<br>releaseブランチにマージする|
その他必要に応じて適宜ブランチを作成する．案件別参照

### ブランチ作成ルール
* 1機能(1 issue)、1ブランチ
* 基本的にマージ予定先から切る
    * 通常は次期リリースのリリースブランチから作成する
    * issue#n の子issue#m の場合は，issue#n から作成する
* コマンドについてはGitコマンドについて参照

### ブランチの削除について
リリースのタイミングでブランチの削除を行う．プルリクが受理されたからと言って勝手に削除しないこと

## コミットメッセージについて
### 形式
```
[add|remove|update|fix]: 要約 #issue番号
```
* add : 新規ファイル・機能追加
* remove : ファイル削除
* update : 機能修正（バグはfix）
* fix : バグ修正

## マージ先ブランチを作業ブランチに反映する
マージ先ブランチから作業ブランチを作成した後に更新されているとき、作業ブランチからマージすることができないことある(コンフリクト)
このようなときに、マージ先ブランチの変更を作業ブランチに反映する必要がある。
```
$ git switch master
$ git pull
$ git switch <作業ブランチ>
$ git merge <マージ先ブランチ>
// ここでコンフリクトが発生するはず
// ファイルを編集してコンフリクトを解消する
$ git add <コンフリクトを解消したファイル>
$ git commit 
$ git push origin/<作業ブランチ>
```

## プルリクについて
プルリクは作業ブランチでの作業が一通り終了した時点で作成する．  
プルリクの向き先は親ブランチ（通常はリリースブランチ）である．  

### プルリク作成時
プルリクの作成時に，issue番号と修正内容について記述しておくことが好ましい．  

### レビュワー
開発に関わっている人を設定することが好ましい．

### マージ
マージはTOPが行うことが多いが，別にこの限りではない．  
実装者がマージする際にはレビュワーが，OKすること  



<br>
<br>
